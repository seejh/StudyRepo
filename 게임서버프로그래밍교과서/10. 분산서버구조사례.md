# 10 분산 서버 구조 사례
분산 서버 설계를 위해 알아야 할 지식들을 알아보았다. 이론만 배우고 실제로 적용하는 것은 힘들기에 기존에 알려져 있는 
분산 서버 구조를 참고해본다. 

# 10.1 로그온 처리 분산
보통 로그온 처리는 다음과 같다. 
1. 클라이언트는 서버에 ID와 비밀번호(암호화)를 보낸다.
2. 로그온 담당 서버(인증 서버)에서 이 메시지를 수신 후 복호화
3. 서버는 복호화된 메시지에서 ID와 비밀번호를 구한 후 DB에 질의를 던지고 기다린다.
4. DB에서 질의를 수행한 후 응답을 서버에 회신한다.
5. 서버는 이를 받아 로그인의 성공 유무를 판단한다. 그리고 로그온 결과를 클라이언트에 전송한다.

![image](https://github.com/user-attachments/assets/32fc311d-74ef-4576-959b-9bb299f67496) <br/>
위의 내용을 도식화한 것으로 빨간 부분이 클라이언트 수가 늘어남에 따라 과부하가 걸리는 지점이다. 과부하가 일어나는 지점을 찾는 것은 
9장에서 배운 성능 분석 도구를 사용하면 쉽다. <br/>

동시접속자가 많아지면 인증 서버에서 CPU 사용량이 점점 과부하에 가까워진다. 이는 로그온 메시지를 복호화하는 연산 과정 때문이다.
자연스럽게 DB 서버도 과부하에 가까워지는데 이는 질의 분석이나 디스크 스토리지에서 읽기 액세스를 하는 데 걸리는 시간 때문이다.
추가적으로 설명하자면, 흥미롭게도 DB의 양 자체는 과부하가 아니다. 극단적으로 사용자 한 명당 1KB를 차지한다고 할 때 전 세계 인구 60억 명을 담는 공간은
6TB 정도이며 요즘 시대에 이 정도 용량은 저렴하게 확보할 수 있다.

이제 이 두 가지 과부하 예상 지점을 수평 확장할 수 있는 방법을 찾아본다. 가장 눈에 띄는 부분은 인증 서버다. 앞서 알아본 데이터 단위 분산을 해보자.
아래와 같이 같은 역할을 하는 인증 서버를 서버 기기 여러 대로 수평 확장해보자.











