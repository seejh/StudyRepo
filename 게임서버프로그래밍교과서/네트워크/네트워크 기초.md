컴퓨터 네트워크는 크게 단말기와 네트워크 기기로 구성된다. 쉽게, 단말기는 컴퓨터이고 네트워크 기기는 네트워크 스위치이다. 네트워크 스위치 하나를 사이에 두고 별 모양으로 단말기들이 연결되어 있는 것을 흔히 로컬 지역 네트워크(LAN)이라고 한다. <br/>

# OSI(Open Systems Interconnection reference) 모델
컴퓨터 네트워크 통신에 대한 국제 표준이다. 이 표준만 잘 지키면 어떤 기기든, 어떤 형태의 통신 선로를 사용하든 컴퓨터 간 통신을 할 수 있다. LAN은 OSI 모델의 2 계층(Layer)에 속하고 2계층의 규칙을 지켜준다면 회선이 랜선이든 무선이든 전화선이든 레이저든 상관없이 통신할 수 있다.

### 물리 계층(계층 1)
하드웨어를 다룬다. 예를 들어 데이터를 어떤 파형의 전류로 보낼지 등을 정의한다.
### 데이터 링크 계층(2)
LAN에서 통신을 가능하게 한다.
### 네트워크 계층(3)
WAN(광역 통신망)에서 통신을 가능하게 한다.
### 전송 계층(4)

### 세션(5), 표현(6), 응용(7)
응용 프로그램이나 운영체제 안 모듈이 다른 컴퓨터의 응용 프로그램이나 운영체제 모듈과 통신을 하는 동안 논리적 연결 단위나 기능들은 계층 5~7에서 다룬다. 우리가 만드는 게임 서버 프로그램도 이 5~7 중 어딘가를 정의하는 것이다.

## OSI 모델 계층 2 (데이터 링크)
* 각 단말기는 고유한 주소를 갖는다.
* 단말기는 데이터를 프레임(frame)이라는 단위로 주고 받는다.

## OSI 모델 계층 3 (네트워크)
ㅇㅇㅇ

# 컴퓨터 네트워크 데이터
OSI 모델의 계층 2에서는 데이터 단위를 프레임이라 했고 계층 3에서는 패킷이라고 했다. 그렇지만 네트워크나 서버 앱을 개발할 때는 이를 직접 다룰 일이 흔하지는 않다. 그 대신 스트림과 메시지라는 것을 주로 다룬다.

## 스트림 형식


# 컴퓨터 네트워크의 품질과 특성
## 네트워크 품질 기준 세 가지
* 전송 속도(스루풋)
* 패킷 유실률
* 레이턴시

### 전송 속도(스루풋)
시간 당 이동하는 데이터량으로 이 값은 높을수록 좋다.<br/>
전송 속도는 회선의 종류가 좋을수록, 네트워크 장비의 처리 속도가 빠를수록 향상된다.

### 패킷 유실률
전송되는 데이터가 중간에 버려지는 비율로 이 값은 낮을수록 좋다.<br/>
회선 품질이 좋을수록, 경로에 있는 라우터의 개수가 적을수록, 라우터의 처리 성능이 좋을수록 낮다.

### 레이턴시
전송되는 데이터가 목적지에 도착하는 데 걸리는 시간으로 이 값은 낮을수록 좋다.<br/>
회선 길이가 길수록 높고 경로에 라우터 개수가 많을수록, 라우터들의 처리 성능이 나쁠수록 높다.

## 네트워크 품질을 저해하는 것들
### 패킷 유실률
#### 네트워크 장비
네트워크 장비가 본인의 한도를 넘는 데이터를 받으면 아래의 둘 중 하나로 동작하게 된다.
* 한도를 넘는 데이터를 버린다.
* 한도를 넘는 데이터를 메모리에 적재한다.

한도를 넘는 데이터를 버리는 것은(packet drop) 그 자체로 패킷 유실(packet loss)이고 메모리에 적재할 경우, 그 상황이 오래된다면 네트워크 장비가 뻗어서 패킷이 유실된다.(멈추거나 재부팅).

#### 회선
데이터가 무선이나 유선 회선으로 이동하는 동안 외부에서 잡음(noise)가 섞일 수도 있고 신호가 약해질 수도 있다. 이때 수신한 데이터는 원래 보냈던 데이터와 내용이 달라질 수 있다. 다시 말해 오류가 발생할 수 있고 이 오류는 계층 2나 계층 3의 체크섬 검사로 확인할 수 있으며 발견되면 데이터 수정을 시도한다. 수정하기 어려우면 패킷 혹은 프레임을 그냥 버린다. 한마디로 네트워크 기기에 데이터가 가는 동안 잡음이 섞이면 프레임이나 패킷은 그냥 버려진다.

### 레이턴시
매체의 종류와 품질, 송신자와 수신자 사이의 라우터 처리속도에 영향을 받는다. 

#### 매체의 종류와 품질에 의한 레이턴시
주로 사용하는 매체의 종류로 구리 전선, 광섬유, 무선이 있다. 
* 구리 전선 : 컴퓨터에 랜선을 꽂아서 사용
* 광섬유 : ISP에서 사용하는 해저 광케이블
* 전파 : 와이파이

무선 통신에서 전파가 전달되는 속도는 전파 자체가 빛의 일종으로 빛의 속도와 같다. 광섬유로 전달되는 것도 마찬가지이다. 구리 전선은 빛의 속도보다는 조금 더 느리다. 이것만 놓고 보면 무선 통신이 더 빨라야 한다. <br/>

하지만 실제로는 그렇지 않다. 왜냐면 레이턴시에 영향을 주는 것으로 매체의 품질도 있기 때문이다. 구리선이나 광섬유에 훼손이 있으면 전달되는 신호가 일부 변형된다. 무선에서도 마찬가지로 거리가 너무 멀거나 전파를 방해하는 물질이 있거나 외부 신호의 간섭이 있으면 변형이 일어난다. 변형된 신호는 사용할 수 없기 때문에 버려지고 송신 측에서는 잠시 뒤에 다시 보내게 되는데 이 "다시 보내기" 자체가 레이턴시의 원인이 된다. 매체의 품질이 낮으면 재전송에 의한 레이턴시로 이어진다. <br/>

#### 라우터 처리 속도에 의한 레이턴시
송신자와 수신자 사이에는 스위치, 라우터, 방화벽 같은 네트워크 기기들이 많이 있다. 이들도 결국 하나하나 다 컴퓨터이므로 신호를 수신하면 그것을 처리 가능한 데이터로 변환한 후 네트워크 기기의 메모리에 쌓아 놓고 연산 처리를 하는데 이러한 작업들도 마이크로초~밀리초 단위의 시간을 차지하므로 네트워크 레이턴시를 증가시킨다.

#### 확인
데이터는 빛이나 전류로 전송되며 빛은 초당 지구를 7바퀴 돈다. 한국과 남미 사이의 거리는 약 2만km 정도(지구 둘레의 1/2 정도)이다. 그러면 남미로 데이터를 보내는데 70ms 정도가 나와야 하는데 실제로 보내면 몇 배나 오래 걸려서 도착한다. 왜 그런 것일까? <br/>

이유는 데이터가 매체를 통과하는 시간 보다 네트워크 기기 안에서 처리하는 시간이 훨씬 길기 때문이다. 랜선이나 광섬유로 신호를 전달할 수 있는 길이는 제한되어 있고 인터넷은 수많은 LAN의 집합체이다. 즉, 통신하는 두 단말기 사이에 많은 네트워크 장비가 있다는 것이고 이러한 네트워크 장비들을 지날 때마다 레이턴시가 누적된다. <br/>

"두 단말기 사이의 레이턴시 = 두 단말기 사이에 있는 네트워크 기기의 레이턴시 총합"이라고 정리할 수 있다.

### 전송 속도(스루풋)
단말기 사이에 있는 각 네트워크 기기를 지날 때 마다 최대 속도가 있다. 내가 데이터를 전송하는데 5개의 구간을 지난다고 하고 4개의 구간의 속도가 200이라고 하더라도 한 구간의 속도가 50이라면 나의 최대 전송속도는 50이 되게 된다.


<hr/><br/><br/>
TCP 네트워킹
패킷 유실 시 UDP와 TCP에서 현상
주로 사용하는 메시지 형식
네트워크 주소 변환

요약
최신 컴퓨터 네트워크의 기본 유형은 LAN이다. LAN은 단말기와 네트워크 기기(스위치)로 구성되며 근거리 통신망이다.
LAN들은 서로 연결될 수 있으며 그 사이에 라우터가 있다. LAN들의 연결 집합을 WAN이라고 하며 원거리 통신망이다.
WAN이 전 세계로 덮인 것을 인터넷이라고 한다.

통신하는 데이터 단위는 스트림과 메시지로 구별된다. 스트림은 주고받는 데이터의 시작과 끝 구별이 없고 보내는 쪽의 크기나 길이가 받는 쪽과 동일하지 않을 수 있다. 메시지는 그 반대이다.

인터넷에서 컴퓨터가 서로 통신하려면 IP 주소가 있어야 하고 프로세스 간에 서로 통신하려면 포트 번호도 있어야 한다. 

통신 품질에 관련된 것으로 레이턴시, 스루풋, 패킷 유실률이 있다.

프로세스 간에 통신을 하려면 소켓을 다루어야 한다.

사용자 프로그램에서 다루는 대표적인 통신 규약(프로토콜)은 TCP와 UDP가 있다. TCP는 거의 모든 종류의 메시지에서 사용되고 UDP는 캐릭터 이동이나 음성, 화상 전송처럼 유실이 다소 허용되는 곳에서 사용한다. TCP는 스트림 형식이고, UDP는 메시지 형식이다. 

사용자가 주고 받는 데이터 구조는 텍스트나 이진 형식이다. 메타데이터를 부가하면 하위 호환성에서 유리하지만 통신량 같은 문제가 뒤따른다.









