Transactioin Isolation Level(트랜잭션 격리 수준)

사전에 알아야할 내용<br/>


트랜잭션
트랜잭션은 하나의 논리적 작업 단위로 수행되는 일련의 작업이다. ACID(원자성, 일관성, 격리성, 영속성)을 만족해야 한다.
기본적으로 트랜잭션은 커넥션 수준에서 관리된다.

Lock
다른 트랜잭션에 의한 충돌이나 불완전한 접근을 방지하면서 데이터를 보호하기 위해 트랜잭션이 소유하는 관리 리소스를 말한다.

Exclusive Lock(배타 잠금, XLock)
다른 트랜잭션이 write할 수 없고, read의 경우는 NOLOCK으로 힌트를 주거나 Read Uncommitted 격리 수준에서만 가능

Shared Lock(공유 잠금, SLock)
다른 트랜잭션이 write할 수 없고, 
비관적 동시성 제어 하에서 리소스를 읽을 수 있다. 공유 잠금이 리소스에 존재하는 동안 다른 트랜잭션은 데이터를 write할 수 없다.

<hr/>
동시성 부작용<br/>
업데이트 손실

Dirty Read(커밋되지 않은 종속성)

Non-Repeatable Read(일관성없는 분석)

Phantom Read(가상 읽기)


<hr/>
필요성

트랜잭션 격리 수준<br/>
레벨이 낮을수록 격리 수준이 낮아지는 것으로 성능상에 이점을 가지지만 위에서 언급한 부작용들이 발생할 수 있는 경우가 생긴다.<br/>

<table>
<th>격리 레벨</th><th>Dirty Read</th><th>Non-Repeatable Read</th><th>Phantom Read</th>
<tr>
  <td>Read Uncommitted(Level 0)</td><td>발생</td><td>발생</td><td>발생</td>
</tr>
<tr>
  <td>Read Committed(Level 1)</td><td>발생X</td><td>발생</td><td>발생</td>
</tr>
<tr>
  <td>Repeatable Read(Level 2)</td><td>발생X</td><td>발생X</td><td>발생</td>
</tr>
<tr>
  <td>Serializable(Level 3)</td><td>발생X</td><td>발생X</td><td>발생X</td>
</tr>
</table>

1 - Read Uncommitted
데이터를 읽을 시 커밋되지 않은 내용도 가지고 온다. Dirty Read 발생

2 - Read Committed
데이터를 읽을 시 커밋된 내용만 가지고 온다. DB에서 기본적으로 채택하는 격리 수준.
한 트랜잭션에서 수정한 내용이 아직 커밋되지 않은 경우, 다른 트랜잭션에서는 UNDO 영역의 레코드 값을 가져온다.
커밋 여부에 따라 다른 값을 다루기 떄문에 정합성에 문제는 있는 상황.

3 - Repeatable Read


4 - Serializable
트랜잭션 간 완전히 격리되는 수준
