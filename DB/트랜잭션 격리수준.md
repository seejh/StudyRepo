# 트랜잭션 격리 수준

# 잠금 종류
## 공유 잠금 (Shared Lock)
읽기 잠금, 데이터를 읽을(Read) 때 사용하는 락 <br/>
트랜잭션1에서 공유 잠금을 걸었을 때 타 트랜잭션에서 공유 잠금은 획득할 수 있지만 배타 잠금은 획득할 수 없다. <br/>

### 공유 잠금 추가 설명
* 트랜잭션1, 2가(이하 T1, T2) 동시에 레코드 A를 Read (공유 잠금 2개 걸림)
* T1에서 Read 후 Write를 하려고 함 (공유 잠금 해제, 배타 잠금 획득 시도)
* T2가 덜 읽음 (공유 잠금), T1에서 배타 잠금 획득 실패
* T2가 다 읽음 (공유 잠금 해제), T1에서 배타 잠금 획득

## 배타 잠금 (Exclusive Lock)
쓰기 잠금, 데이터를 쓸(Write) 때 사용하는 락 <br/>
트랜잭션1에서 배타 락을 걸면 타 트랜잭션에서 이를 해제할 때까지 read, write 할 수 없다. <br/>

### 배타 잠금 추가 설명
* T1에서 공유 락을 걸고 있는 경우 T2에서 배타 락을 걸지 못한다.
* T1에서 배타 락을 걸고 있는 경우 T2에서 배타 락, 공유 락을 걸지 못한다.

# 충돌 문제 종류
## Dirty Read
타 트랜잭션의 수정 후 commit되지 않은 내용을 읽음
* T1에서 레코드 A에 접근, 값을 2로 수정
* T2에서 레코드 A 조회, 값 2 확인
* T1에서 레코드 A 롤백

## Non-Repeatable Read


## Phantom Read


# 잠금 레벨
## 1. READ UNCOMMITTED
현재 트랜잭션에서 read한 데이터를 다른 트랜잭션에서 write하지 못하도록 하는 공유 잠금을 실행하지 않는다.
다른 트랜잭션에서 수정되었지만 아직 커밋되지 않은 행을 현재 트랜잭션이 읽지 못하도록하는 배타적 잠금에 의해 차단되지 않는다.
=> 공유 락을 사용하지 않고, 배타락을 사용하지만 침범한다.
트랜잭션 잠금 레벨에서 가장 제한이 적다. 

### READ UNCOMMITTED에서 발생할 수 있는 충돌 문제
Dirty Read

## 2. READ COMMITTED
SQL Server의 기본 잠금 레벨.

### READ COMMITTED에서 발생할 수 있는 충돌 문제
Dirty Read는 방지.
반복할 수 없는 읽기
가상 읽기

## 3. REPEATABLE READ
