# 캐시 메모리(Cache Memory)
### 메모리 계층 구조 그림
<img width="670" height="368" alt="image" src="https://github.com/user-attachments/assets/3eceec31-287d-4425-b585-1f27103c8a74" /><br/>
레지스터, 메인 메모리와 함께 메모리 계층 구조 중 하나. 프로그램에서 직접적으로 사용할 수 없고 하드웨어 메모리 관리
시스템이 내부적으로 제어한다.<br/>

프로세서의 클럭 속도가 빨리짐에 따라 프로세서 밖에 있는 메인 메모리와의 속도 차이가 현저하게 증가했고 이 때문에 프로세서
클럭 속도를 아무리 올려도 메인 메모리에서 데이터를 빠르게 제공해 주지 못하여 전체 시스템 성능이 증가하게 어렵게 되었다.<br/>

위의 내용이 캐시의 필요성과 정의이다. 느린 장치의 속도를 커버하기 위해서 빠른 장치에서 
속도가 느린 장치로 가지 않고도 데이터를 제공하기 위한 메모리이다. 필요한 데이터를 예측하여 캐시에 보관하여
메인메모리로 데이터를 요청할 필요가 없게 하는 것으로 이를 위해 데이터 지역성이라는 개념을 사용한다.
<br/>

## 데이터 지역성(Data Locality)
대부분 프로그램은 한 번 사용한 데이터를 재사용할 가능성이 높고, 그 주변의 데이터도 곧 사용할 가능성이 높은 데이터 지역성을
가지고 있다. 데이터 지역성을 활용하여 메인 메모리에 있는 데이터를 캐시 메모리에 불러와 두고 프로세서가 필요한 데이터를 캐시 메모리에서 먼저 찾으면 시스템 성능을 향상시킬 수 있다.<br/>

### 시간지역성
최근에 참조된 데이터가 곧 다시 참조되는 특성
### 공간지역성
최근에 참조된 데이터와 인접한 데이터가 참조될 가능성이 높은 특성

## 캐시 배치 정책(=캐시 라인)
캐시 사상(mapping) 구조.

### Direct Mapped Cache (직접 사상)
<img width="482" height="338" alt="image" src="https://github.com/user-attachments/assets/d92e4fe6-cd07-46c7-a927-d4a44873cf5f" /><br/>
캐시메모리의 공간이 8개(000 ~ 111)이고 메인메모리의 공간이 32개(00000 ~ 11111)이라고 하면 
메인메모리의 주소가 00000, 01000, 10000, 11000인 곳의 데이터를 캐시 메모리의 주소가 000인 곳에서만 읽고 쓰는 방식이다.<br/>

이때 000을 인덱스 필드(Index Field), 인덱스를 제외한 나머지 비트 00, 01, 10, 11을 태그 필드(Tag Field)라 하고 기본적으로
태그 비트와 인덱스 비트 뒤에 데이터를 <br/>

간단하고 빠르지만 약점(conflict miss)이 크다. 캐시 메모리 공간 활용도가 굉장히 떨어지고 현대 CPU에서는 어지간하면
채택되지 않는 편이다.

### Fully Associative Cache(완전 연관 사상)
비어있는 메모리에 대해 크게 조건 없이 저장하여 캐시 메모리 공간 활용도가 높지만 찾는 것이 힘들다.
어떤 조건이나 규칙 없이 저장했으니 모든 캐시 블록에서 검색하게 된다.

### Set Associative Cache(집합 연관 사상)
direct와 fully의 장점을 섞었다고 할 수 있는 가장 나중에 나온 방식으로 현대 CPU 모든 계층의 캐시 메모리에서 
채택되는 방식.

특정 행을 지정해서 그 행 안의 어떤 열이든 비어있으면 저장하는 방식.
direct에 비해 검색은 오래 걸리지만 저장이 빠르고, fully에 비해 저장이 느린 대신 검색이 빠른 중간적인 특징을 가진다.
